import{c as i,u as e,b as t,F as g,f as L,t as o,e as n,g as r,d as u,l as S,a as b,o as d,w as x}from"./index-exq00CYa.js";import{V as B}from"./index-j85e1aG5.js";import{u as p}from"./usePriceToTw-mhH8eMrj.js";import{u as Q}from"./useComputedDiscount-C5EyVmDF.js";import{u as R}from"./wishStores-v4aSYZuj.js";import{u as V}from"./cartStores-FLu731ZW.js";import{_ as E}from"./QuantityButtonGroup-ElPXdvcF.js";import"./useToast-iRdsLGGg.js";const N={key:0,class:"container"},W={key:0},G=t("h2",{class:"fw-bolder fs-4"},"購物車列表",-1),H={class:"table-responsive"},T={class:"table align-middle"},q=t("td",{class:"text-start",colspan:"3"},"商品明細",-1),D=t("td",null,"售價",-1),j=t("td",{class:"text-center"},[t("div",{style:{paddingRight:"2rem"}},"數量")],-1),O=t("td",{class:"text-center"},"小計",-1),P={class:"pb-0",colspan:"1"},z=["src","alt"],A={class:"cart-sale-tag"},I=t("td",null,null,-1),K={class:"d-flex flex-column justify-content-center"},M={class:"text-decoration-line-through text-muted ms-1",style:{fontSize:"15px"}},U={class:"fw-500 fs-5 text-danger"},Z={class:"text-center"},J={style:{width:"150px"}},$={class:"text-center"},Y={class:"flex-center"},X=["onClick"],tt=["onClick"],st={class:"d-flex justify-content-end border-bottom border-2 pb-12 mb-12"},et={class:"d-flex flex-column align-items-end"},ot={class:"fs-5"},nt={class:"fw-700"},ct=t("span",{class:"text-end text-muted"},"*未含運費",-1),at={class:"d-flex justify-content-end pb-12 mb-12"},it={key:1,class:"flex-center flex-column"},dt={class:"fs-4 mb-4"},lt=t("div",{class:"my-3"},[t("img",{src:"https://storage.googleapis.com/vue-course-api.appspot.com/vue-ben0588/1709523797457.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=TVpfq289hPAS0eJEUfUdQ094vN5dKwHD%2B261x5OpEH1uHeeE0Nd99HygcwvSAOfHcQJ4%2F%2B9BK4ugP20MZHg4sW9yksSFesbZoGYe6mOP3%2FLGJYD%2BwUyH3Go3d544OviGcMSRW%2FzcR1RKaWsMH1JEKdqCXibbCmwjqmnGufKB%2FeMqTzm3u8%2Fa66DIcFfmJf4t4%2BWdh2R5EQWzKN%2FVTud3sRRhiH%2BrltLOEoty5SBftDQnphuRO19cubaX2FaUG5ZpArGLvfPUgNu8lW9ivRIlaWgEqf36Mki4GOVn1cL2QV5lPje1jeZqN5oQjRZk1%2F52YRpaP7LcSt%2ByA%2FZEa0mnpQ%3D%3D",alt:"購物車目前並無任何商品",style:{width:"200px",height:"200px"}})],-1),rt={class:"mt-4 w-100 text-center"},vt={__name:"ShoppingCartView",setup(ut){const v=R(),{addWishList:y,isWishListed:h}=v,c=V(),{deleteCart:w,deleteCarts:f,editCart:k}=c,C=({qty:m,id:l,productId:a})=>{l===c.addTargetId&&k({id:l,quantity:m,productId:a})};return(m,l)=>{const a=b("router-link"),_=b("font-awesome-icon");return d(),i(g,null,[e(c).cartLoading?S("",!0):(d(),i("div",N,[e(c).cartList.length?(d(),i("div",W,[G,t("div",H,[t("table",T,[t("thead",null,[t("tr",null,[q,D,j,O,t("th",P,[t("button",{type:"button",class:"btn btn-outline-danger py-1 mb-1",onClick:l[0]||(l[0]=(...s)=>e(f)&&e(f)(...s))}," 移除所有品項 ")])])]),t("tbody",null,[(d(!0),i(g,null,L(e(c).cartList,s=>(d(),i("tr",{key:s.id},[t("td",null,[n(a,{to:`products/${s.product_id}`,title:"查看商品詳情",class:"cart-img-container image-hover"},{default:r(()=>[t("img",{src:s.product.imageUrl,alt:s.product.title,class:"cart-img"},null,8,z),t("span",A," -"+o(e(Q)(s.product.origin_price,s.product.price)),1)]),_:2},1032,["to"])]),t("td",null,[t("div",null,[t("div",null,o(s.product.title),1),t("div",null,o(s.product.description),1),t("div",null,"單位："+o(s.product.unit),1)])]),I,t("td",null,[t("div",K,[t("span",M,o(e(p)(s.product.origin_price)),1),t("span",U,o(e(p)(s.product.price)),1)])]),t("td",Z,[t("div",J,[n(E,{onFetchQuantity:C,id:s.id,type:"api-edit",cartQuantity:s.qty,productId:s.product_id,btnClass:"btn-secondary",inputClass:"border-secondary"},null,8,["id","cartQuantity","productId"])])]),t("td",$,o(e(p)(s.total)),1),t("td",null,[t("div",Y,[t("span",{class:"cursor-pointer me-2",onClick:x(F=>e(y)(s.product),["prevent"])},[n(_,{icon:[e(h)(s.product)?"fas":"far","heart"],class:"text-danger fs-3",title:e(h)(s.product)?"移除願望清單":"加入願望清單中"},null,8,["icon","title"])],8,X),t("button",{onClick:x(F=>e(w)(s.id),["prevent"]),type:"button",class:"btn btn btn-none"},[n(_,{icon:["far","trash-can"],title:"移除購物車",class:"fs-4"})],8,tt)])])]))),128))])])]),t("div",st,[t("div",et,[t("span",ot,[t("span",null," 共 "+o(e(c).cartList.length)+" 項商品 | ",1),t("span",nt," 合計 NT"+o(e(p)(e(c).cartFinalTotal)),1)]),ct])]),t("div",at,[n(a,{to:"/products",class:"btn btn-outline-dark",style:{width:"150px"}},{default:r(()=>[u("繼續購物")]),_:1}),n(a,{to:"/carts/confirm",class:"btn btn-primary text-white ms-2",style:{width:"150px"}},{default:r(()=>[u("填寫訂單資訊")]),_:1})])])):(d(),i("div",it,[t("p",dt,[n(_,{icon:["fas","circle-exclamation"],class:"text-danger me-2"}),u("購物車目前並無任何商品 ")]),lt,t("div",rt,[n(a,{to:"/products",class:"btn btn-dark px-64"},{default:r(()=>[u("前去逛逛")]),_:1})])]))])),n(e(B),{active:e(c).cartLoading,"can-cancel":!1,color:"#0089A7"},null,8,["active"])],64)}}};export{vt as default};
