import{c as l,u as e,b as t,F as b,f as V,t as o,e as n,g as r,d as u,l as S,a as x,o as i,w as g}from"./index-6mAGNGOI.js";import{V as T}from"./index-ZTDfC1zn.js";import{u as _}from"./usePriceToTw-mhH8eMrj.js";import{u as F}from"./useComputedDiscount-gPMMQb3j.js";import{u as N}from"./wishStores-xftcDNzg.js";import{u as Q}from"./cartStores-P-FEb9gr.js";import{_ as $}from"./QuantityButtonGroup-X-B5vM0h.js";import"./useToast-p4sfD7q1.js";const j={key:0,class:"container"},B={key:0},I=t("h2",{class:"fw-bolder fs-4"},"購物車列表",-1),W={class:"table-responsive"},q={class:"table align-middle"},D=t("td",{class:"text-start",colspan:"3"},"商品明細",-1),A=t("td",null,"售價",-1),E=t("td",{class:"text-center"},[t("div",{style:{paddingRight:"2rem"}},"數量")],-1),M=t("td",{class:"text-center"},"小計",-1),P={class:"pb-0",colspan:"1"},R=["src","alt"],U={class:"cart-sale-tag"},z=t("td",null,null,-1),G={class:"d-flex flex-column justify-content-center"},H={class:"text-decoration-line-through text-muted ms-1"},J={class:"fw-500 fs-5 text-danger"},K={class:"text-center"},O={style:{width:"150px"}},X={class:"text-center"},Y={class:"flex-center"},Z=["onClick"],tt=["onClick"],st={class:"d-flex justify-content-end border-bottom border-2 pb-12 mb-12"},et={class:"d-flex flex-column align-items-end"},ot={class:"fs-5"},nt={class:"fw-700"},ct=t("span",{class:"text-end text-muted"},"*未含運費",-1),at={class:"d-flex justify-content-end pb-12 mb-12"},lt={key:1,class:"flex-center flex-column"},it={class:"fs-4 mb-4"},dt=t("div",{class:"my-3"},[t("img",{src:"https://storage.googleapis.com/vue-course-api.appspot.com/vue-ben0588/1709523797457.png",alt:"購物車目前並無任何商品",style:{width:"200px",height:"200px"}})],-1),rt={class:"mt-4 w-100 text-center"},vt={__name:"ShoppingCartView",setup(ut){const v=N(),{addWishList:y,isWishListed:h}=v,c=Q(),{deleteCart:w,deleteCarts:f,editCart:C}=c,k=({qty:m,id:d,productId:a})=>{d===c.addTargetId&&C({id:d,quantity:m,productId:a})};return(m,d)=>{const a=x("router-link"),p=x("font-awesome-icon");return i(),l(b,null,[e(c).cartLoading?S("",!0):(i(),l("div",j,[e(c).cartList.length?(i(),l("div",B,[I,t("div",W,[t("table",q,[t("thead",null,[t("tr",null,[D,A,E,M,t("th",P,[t("button",{type:"button",class:"btn btn-outline-danger py-1 mb-1",onClick:d[0]||(d[0]=(...s)=>e(f)&&e(f)(...s))}," 移除所有品項 ")])])]),t("tbody",null,[(i(!0),l(b,null,V(e(c).cartList,s=>(i(),l("tr",{key:s.id},[t("td",null,[n(a,{to:`products/${s.product_id}`,title:"查看商品詳情",class:"cart-img-container image-hover"},{default:r(()=>[t("img",{src:s.product.imageUrl,alt:s.product.title,class:"cart-img"},null,8,R),t("span",U," -"+o(e(F)(s.product.origin_price,s.product.price)),1)]),_:2},1032,["to"])]),t("td",null,[t("div",null,[t("div",null,o(s.product.title),1),t("div",null,o(s.product.description),1),t("div",null,"單位："+o(s.product.unit),1)])]),z,t("td",null,[t("div",G,[t("span",H,o(e(_)(s.product.origin_price)),1),t("span",J,o(e(_)(s.product.price)),1)])]),t("td",K,[t("div",O,[n($,{onFetchQuantity:k,id:s.id,type:"api-edit",cartQuantity:s.qty,productId:s.product_id,btnClass:"btn-secondary",inputClass:"border-secondary"},null,8,["id","cartQuantity","productId"])])]),t("td",X,o(e(_)(s.total)),1),t("td",null,[t("div",Y,[t("span",{class:"cursor-pointer me-2",onClick:g(L=>e(y)(s.product),["prevent"])},[n(p,{icon:[e(h)(s.product)?"fas":"far","heart"],class:"text-danger fs-3",title:e(h)(s.product)?"移除願望清單":"加入願望清單中"},null,8,["icon","title"])],8,Z),t("button",{onClick:g(L=>e(w)(s.id),["prevent"]),type:"button",class:"btn btn btn-none"},[n(p,{icon:["far","trash-can"],title:"移除購物車",class:"fs-4"})],8,tt)])])]))),128))])])]),t("div",st,[t("div",et,[t("span",ot,[t("span",null," 共 "+o(e(c).cartList.length)+" 項商品 | ",1),t("span",nt," 合計 NT"+o(e(_)(e(c).cartFinalTotal)),1)]),ct])]),t("div",at,[n(a,{to:"/products",class:"btn btn-outline-dark",style:{width:"150px"}},{default:r(()=>[u("繼續購物")]),_:1}),n(a,{to:"/carts/confirm",class:"btn btn-primary text-white ms-2",style:{width:"150px"}},{default:r(()=>[u("填寫訂單資訊")]),_:1})])])):(i(),l("div",lt,[t("p",it,[n(p,{icon:["fas","circle-exclamation"],class:"text-danger me-2"}),u("購物車目前並無任何商品 ")]),dt,t("div",rt,[n(a,{to:"/products",class:"btn btn-dark px-64"},{default:r(()=>[u("前去逛逛")]),_:1})])]))])),n(e(T),{active:e(c).cartLoading,"can-cancel":!1,color:"#0089A7"},null,8,["active"])],64)}}};export{vt as default};
