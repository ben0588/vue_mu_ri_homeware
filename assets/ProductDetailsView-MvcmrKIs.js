import{B as ye,r as y,q as D,p as Y,C as he,o as f,c as v,b as t,D as we,u as m,w as K,n as Z,s as oe,l as z,E as xe,e as T,g as N,t as $,d as V,F as A,f as U,x as $e,a as ie,m as ne,y as ke}from"./index-QZuZpOYL.js";import{V as Se}from"./index-v5FZqbIh.js";import{S as ae,a as re}from"./swiper-vue-HFBcIiOK.js";import{_ as Te,c as le}from"./RatingStar-H5Ll4ryB.js";import{u as Oe}from"./loadingStores-rQ0tKVk8.js";import{u as Ie}from"./categoryStores-vIxLRbKw.js";import{u as Ce}from"./wishStores-kKy8FX7q.js";import{u as ce}from"./usePriceToTw-mhH8eMrj.js";import{u as Me}from"./useComputedDiscount-Se0-cVfQ.js";import{u as je}from"./searchStores-e6SDb9-g.js";import{_ as Le}from"./CollapseComponent-yUeLlrzt.js";import{M as Ee}from"./bootstrap.esm-FzNOyMo5.js";import{_ as Pe}from"./ProductDescriptionCard-fd6-1Mgn.js";import{u as Be}from"./cartStores-5xe1IyRr.js";import{_ as We}from"./QuantityButtonGroup-aZw3z9iT.js";import"./useToast-aXIsOBHq.js";var Re=Object.defineProperty,Fe=Object.defineProperties,Ne=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,de=(e,s,i)=>s in e?Re(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i,Ae=(e,s)=>{for(var i in s||(s={}))ze.call(s,i)&&de(e,i,s[i]);if(ue)for(var i of ue(s))Xe.call(s,i)&&de(e,i,s[i]);return e},De=(e,s)=>Fe(e,Ne(s)),W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ve="Expected a function",fe=NaN,Ue="[object Symbol]",He=/^\s+|\s+$/g,Ye=/^[-+]0x[0-9a-f]+$/i,qe=/^0b[01]+$/i,Ge=/^0o[0-7]+$/i,Qe=parseInt,Ke=typeof W=="object"&&W&&W.Object===Object&&W,Ze=typeof self=="object"&&self&&self.Object===Object&&self,Je=Ke||Ze||Function("return this")(),et=Object.prototype,tt=et.toString,st=Math.max,ot=Math.min,G=function(){return Je.Date.now()};function it(e,s,i){var a,u,p,h,r,d,_=0,C=!1,k=!1,M=!0;if(typeof e!="function")throw new TypeError(Ve);s=me(s)||0,J(i)&&(C=!!i.leading,k="maxWait"in i,p=k?st(me(i.maxWait)||0,s):p,M="trailing"in i?!!i.trailing:M);function S(n){var g=a,l=u;return a=u=void 0,_=n,h=e.apply(l,g),h}function B(n){return _=n,r=setTimeout(O,s),C?S(n):h}function R(n){var g=n-d,l=n-_,c=s-g;return k?ot(c,p-l):c}function L(n){var g=n-d,l=n-_;return d===void 0||g>=s||g<0||k&&l>=p}function O(){var n=G();if(L(n))return E(n);r=setTimeout(O,R(n))}function E(n){return r=void 0,M&&a?S(n):(a=u=void 0,h)}function P(){r!==void 0&&clearTimeout(r),_=0,a=d=u=r=void 0}function F(){return r===void 0?h:E(G())}function b(){var n=G(),g=L(n);if(a=arguments,u=this,d=n,g){if(r===void 0)return B(d);if(k)return r=setTimeout(O,s),S(d)}return r===void 0&&(r=setTimeout(O,s)),h}return b.cancel=P,b.flush=F,b}function J(e){var s=typeof e;return!!e&&(s=="object"||s=="function")}function nt(e){return!!e&&typeof e=="object"}function at(e){return typeof e=="symbol"||nt(e)&&tt.call(e)==Ue}function me(e){if(typeof e=="number")return e;if(at(e))return fe;if(J(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=J(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=e.replace(He,"");var i=qe.test(e);return i||Ge.test(e)?Qe(e.slice(2),i?2:8):Ye.test(e)?fe:+e}var rt=it,be="Expected a function",ge=NaN,lt="[object Symbol]",ct=/^\s+|\s+$/g,ut=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,ft=/^0o[0-7]+$/i,mt=parseInt,gt=typeof W=="object"&&W&&W.Object===Object&&W,vt=typeof self=="object"&&self&&self.Object===Object&&self,pt=gt||vt||Function("return this")(),ht=Object.prototype,bt=ht.toString,_t=Math.max,yt=Math.min,Q=function(){return pt.Date.now()};function wt(e,s,i){var a,u,p,h,r,d,_=0,C=!1,k=!1,M=!0;if(typeof e!="function")throw new TypeError(be);s=ve(s)||0,q(i)&&(C=!!i.leading,k="maxWait"in i,p=k?_t(ve(i.maxWait)||0,s):p,M="trailing"in i?!!i.trailing:M);function S(n){var g=a,l=u;return a=u=void 0,_=n,h=e.apply(l,g),h}function B(n){return _=n,r=setTimeout(O,s),C?S(n):h}function R(n){var g=n-d,l=n-_,c=s-g;return k?yt(c,p-l):c}function L(n){var g=n-d,l=n-_;return d===void 0||g>=s||g<0||k&&l>=p}function O(){var n=Q();if(L(n))return E(n);r=setTimeout(O,R(n))}function E(n){return r=void 0,M&&a?S(n):(a=u=void 0,h)}function P(){r!==void 0&&clearTimeout(r),_=0,a=d=u=r=void 0}function F(){return r===void 0?h:E(Q())}function b(){var n=Q(),g=L(n);if(a=arguments,u=this,d=n,g){if(r===void 0)return B(d);if(k)return r=setTimeout(O,s),S(d)}return r===void 0&&(r=setTimeout(O,s)),h}return b.cancel=P,b.flush=F,b}function xt(e,s,i){var a=!0,u=!0;if(typeof e!="function")throw new TypeError(be);return q(i)&&(a="leading"in i?!!i.leading:a,u="trailing"in i?!!i.trailing:u),wt(e,s,{leading:a,maxWait:s,trailing:u})}function q(e){var s=typeof e;return!!e&&(s=="object"||s=="function")}function $t(e){return!!e&&typeof e=="object"}function kt(e){return typeof e=="symbol"||$t(e)&&bt.call(e)==lt}function ve(e){if(typeof e=="number")return e;if(kt(e))return ge;if(q(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=q(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=e.replace(ct,"");var i=dt.test(e);return i||ft.test(e)?mt(e.slice(2),i?2:8):ut.test(e)?ge:+e}var pe=xt;const St=["src"],Tt={inheritAttrs:!1},ee=ye(De(Ae({},Tt),{props:{src:{default:""},width:{default:"100%"},height:{default:"auto"},className:{default:""},zoomImgSrc:{default:""},zoomFactor:{default:1.5},mgWidth:{default:150},mgHeight:{default:150},mgBorderWidth:{default:2},mgShape:{default:"circle"},mgShowOverflow:{type:Boolean,default:!0},mgMouseOffsetX:{default:0},mgMouseOffsetY:{default:0},mgTouchOffsetX:{default:()=>-50},mgTouchOffsetY:{default:()=>-50},mgShow:{type:Boolean,default:!0},mgCornerBgColor:{default:"#fff"}},emits:["image:load"],setup(e,{emit:s}){const i=y();let a=y(new DOMRect),u=y(!1),p=y(0),h=y(0),r=y(0),d=y(0);const _=D(()=>{let l="vue-magnifier__magnifying-glass";return u.value&&(l+=" vue-magnifier__visible"),e.mgShape==="circle"&&(l+=" vue-magnifier__circle"),l}),C=D(()=>({width:e.width,height:e.height,overflow:e.mgShowOverflow?"visible":"hidden"})),k=D(()=>({cursor:e.mgShow?"none":"",width:"100%",height:"100%"})),M=D(()=>({width:`${e.mgWidth}px`,height:`${e.mgHeight}px`,left:`calc(${r.value*100}% - ${e.mgWidth/2}px + ${p.value}px - ${e.mgBorderWidth}px)`,top:`calc(${d.value*100}% - ${e.mgHeight/2}px + ${h.value}px - ${e.mgBorderWidth}px)`,backgroundImage:`url(${e.zoomImgSrc||e.src})`,backgroundPosition:`calc(${r.value*100}% + ${e.mgWidth/2}px - ${r.value*e.mgWidth}px) calc(${d.value*100}% + ${e.mgHeight/2}px - ${d.value*e.mgWidth}px)`,backgroundSize:`${e.zoomFactor*a.value.width}% ${e.zoomFactor*a.value.height}%`,borderWidth:`${e.mgBorderWidth}px`,backgroundColor:e.mgCornerBgColor})),S=()=>{i.value&&(a.value=i.value.getBoundingClientRect())},B=l=>{s("image:load",l),S()},R=()=>{S()};let L=l=>{if(a.value){const c=l.target;p.value=e.mgMouseOffsetX,h.value=e.mgMouseOffsetY,r.value=(l.clientX-a.value.left)/c.clientWidth,d.value=(l.clientY-a.value.top)/c.clientHeight,u.value=!0}};const O=()=>{u.value=!1},E=()=>{S()};let P=l=>{if(a.value){const c=l.target,o=(l.targetTouches[0].clientX-a.value.left)/c.clientWidth,X=(l.targetTouches[0].clientY-a.value.top)/c.clientHeight;o>=0&&X>=0&&o<=1&&X<=1?(p.value=e.mgTouchOffsetX,h.value=e.mgTouchOffsetY,r.value=o,d.value=X,u.value=!0):u.value=!1}};const F=()=>{u.value=!1},b=rt(S,200);L=pe(L,20,{trailing:!1}),P=pe(P,20,{trailing:!1});const n=()=>{window.addEventListener("resize",b),window.addEventListener("scroll",b,!0)},g=()=>{window.removeEventListener("resize",b),window.removeEventListener("scroll",b,!0)};return Y(()=>{n()}),he(()=>{g()}),(l,c)=>(f(),v("div",{class:Z(`vue-magnifier__magnifier ${e.className}`),style:oe(m(C))},[t("img",we({ref_key:"img",ref:i,src:e.src},l.$attrs,{class:"vue-magnifier__magnifier-image",style:m(k),onLoad:c[0]||(c[0]=o=>B(o)),onMouseenter:c[1]||(c[1]=o=>R()),onMousemove:c[2]||(c[2]=o=>m(L)(o)),onMouseout:c[3]||(c[3]=o=>O()),onTouchstart:c[4]||(c[4]=K(o=>E(),["prevent"])),onTouchmove:c[5]||(c[5]=K(o=>m(P)(o),["prevent"])),onTouchend:c[6]||(c[6]=o=>F())}),null,16,St),a.value&&e.mgShow?(f(),v("div",{key:0,class:Z(m(_)),style:oe(m(M))},null,6)):z("",!0)],6))}}));ee.install=e=>{e.component("VueMagnifier",ee)};const Ot={class:"modal-dialog modal-lg"},It={class:"modal-content border-0"},Ct=t("h5",{id:"productModalLabel",class:"modal-title"},null,-1),Mt={class:"modal-body"},jt=["src","alt"],Lt={__name:"ImageModal",setup(e,{expose:s}){const i=y(null),a=y(null),u=y(""),p=y("");Y(()=>{a.value=new Ee(i.value)}),he(()=>{a.value&&a.value.dispose()});const h=(d,_)=>{u.value=d,p.value=_,a.value.show()},r=()=>{a.value.hide()};return s({openModal:h,closeModal:r}),(d,_)=>(f(),v("div",{class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true",ref_key:"bsImageModalRef",ref:i},[t("div",Ot,[t("div",It,[t("div",{class:"modal-header bg-dark text-white"},[Ct,t("button",{type:"button",class:"bg-dark text-white fs-4 fw-bolder border-0","data-bs-dismiss":"modal","aria-label":"Close",onClick:r}," X ")]),t("div",Mt,[t("img",{src:u.value,alt:p.value,class:"img-fluid w-100",style:{height:"700px",objectFit:"cover"}},null,8,jt)])])])],512))}},Et={key:0,class:"py-32"},Pt={class:"container"},Bt={key:0},Wt={"aria-label":"breadcrumb"},Rt={class:"breadcrumb"},Ft={class:"breadcrumb-item"},Nt={class:"breadcrumb-item"},zt={class:"breadcrumb-item active","aria-current":"page"},Xt={class:"row"},At={class:"col-lg-6"},Dt={class:"row flex-row flex-sm-column-reverse flex-lg-row"},Vt={class:"col-xl-3 py-2 ps-sm-2 px-lg-0 py-lg-0 ps-xl-4 ps-xxl-0"},Ut=["src","alt"],Ht={class:"col-md-12 col-lg-12 col-xl-9 px-lg-1"},Yt={class:"details-magnifying-glass-icon"},qt={class:"col-lg-6"},Gt={class:"px-3 pb-3"},Qt={class:"d-flex justify-content-between align-items-center text-dark fw-bolder fs-4"},Kt={class:"text-muted fs-6 mt-4 pb-3"},Zt={class:"fw-500"},Jt={key:0,class:"d-flex align-items-center mt-3"},es={class:"fs-3 fw-700 text-danger"},ts={class:"text-danger border border-danger mt-1 ms-2 px-2"},ss={key:1,class:"mt-3"},os={class:"fs-4 fw-bolder text-dark"},is=t("div",{class:"d-flex flex-column border-start border-5 border-primary mb-4 mt-5 ps-2"},[t("span",{class:"text-ellipsis"},"首次，使用 LinePay 首次滿千免運，贈送點數!"),t("span",{class:"text-ellipsis"},"全店，滿額免運：全店滿$999元免運 (海外地區不適用)"),t("span",{class:"text-ellipsis"},"全店，滿額贈：消費滿$2000元贈 TEXT 品牌提袋 x1")],-1),ns={class:"mt-3"},as={class:"row"},rs={class:"col-6 col-xl-5"},ls={class:"col-6 col-xl-7"},cs=["disabled"],us={key:0},ds=t("span",{class:"spinner-border spinner-border-sm",role:"status"},[t("span",{class:"visually-hidden"},"新增購物車中")],-1),fs={key:1},ms={class:"mt-3"},gs={class:"table-responsive"},vs={class:"details-table table align-middle mb-0"},ps=t("thead",null,[t("tr",null,[t("th",null,"名稱"),t("th",null,"內容")])],-1),hs=t("td",null,"產品編碼",-1),bs=t("td",null,"顏色",-1),_s={key:0},ys=t("td",null,"尺寸[長x寬x高](cm)",-1),ws=t("td",null,"材質",-1),xs={class:"row border-top border-2 py-3"},$s=t("div",{class:"col-lg-3"},null,-1),ks={class:"col-lg-6"},Ss=t("h3",{class:"text-center my-4"},"產品描述",-1),Ts=["src","alt","onClick"],Os={key:1,class:"mt-3"},Is=t("div",{class:"col-lg-3"},null,-1),Cs=t("div",{class:"mt-3"},null,-1),Ms=t("h3",{class:"text-center mb-4"},"推薦商品",-1),js={key:0,class:"mt-3",style:{backgroundColor:"#FBF9F9"}},Ls={class:"py-5"},Es={class:"container p-0"},Ps={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 justify-content-start align-items-stretch overflow-x-nowrap-lg m-0"},Zs={__name:"ProductDetailsView",setup(e){const s=y(null),i=xe(),{showAlert:a}=ke(),u=Ie(),p=Oe(),h=Ce(),{addWishList:r,isWishListed:d}=h,_=je(),C=Be(),{addCart:k}=C,M=y([]),S=y(""),B=y(1),R="https://vue3-course-api.hexschool.io",L="vue-ben0588";function O(){return _.originProducts.filter(w=>w.category===S.value).slice(0,5)}const E=D(()=>le(O())),P=y(null),F=w=>{P.value=w};let b=null;const n=y(null),g=y(null),l=w=>{b=w,b.params.navigation.prevEl=n.value,b.params.navigation.nextEl=g.value,b.navigation.init(),b.navigation.update()};Y(()=>{b&&(b.navigation.init(),b.navigation.update())});const c=async()=>{try{p.toggleLoading();const w=`${R}/v2/api/${L}/product/${i.params.id}`,I=await $e.get(w);S.value=I.data.product.category,M.value.push(I.data.product)}catch(w){a({title:"失敗",text:`${w.response.data.message}`,icon:"error",confirmButtonText:"確認",confirmButtonColor:"#000000",allowEscapeKey:!1,allowOutsideClick:!1})}finally{p.toggleLoading()}},o=D(()=>le(M.value)[0]),X=w=>{u.categoryTarget=w},te=(w,I)=>{s.value.openModal(w,I)},_e=({qty:w})=>{B.value=w};return Y(()=>{c()}),(w,I)=>{const se=ie("router-link"),H=ie("font-awesome-icon");return f(),v(A,null,[t("div",null,[m(p).isLoading?z("",!0):(f(),v("div",Et,[t("div",Pt,[o.value?(f(),v("div",Bt,[t("nav",Wt,[t("ol",Rt,[t("li",Ft,[T(se,{to:"/products",onClick:I[0]||(I[0]=()=>{X("全部商品")})},{default:N(()=>[V("全部商品")]),_:1})]),t("li",Nt,[T(se,{to:"/products",onClick:I[1]||(I[1]=()=>{X(o.value.category)})},{default:N(()=>[V($(o.value.category),1)]),_:1})]),t("li",zt,$(o.value.title),1)])]),t("div",Xt,[t("div",At,[t("div",Dt,[t("div",Vt,[T(m(re),{onSwiper:F,slidesPerView:5,spaceBetween:11.7,freeMode:!0,watchSlidesProgress:!0,class:"thumbs-swiper-container ms-sm-1 ms-lg-0"},{default:N(()=>[(f(!0),v(A,null,U(o.value.imagesUrl,(x,j)=>(f(),ne(m(ae),{key:j,class:"thumbs-swiper my-sm-2 my-xl-0 mb-xl-2 ms-xl-2 ms-xxl-4"},{default:N(()=>[t("img",{src:x,alt:o.value.title,class:"thumbs-swiper-img d-block object-fit-cover"},null,8,Ut)]),_:2},1024))),128))]),_:1})]),t("div",Ht,[T(m(re),{slidesPerView:1,slidesPerGroup:1,autoplay:{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},grabCursor:!0,pagination:{clickable:!0,el:".details-swiper-pagination"},class:"mid-swiper-container position-relative",thumbs:{swiper:P.value},style:{"--details-swiper-pagination-color":"#000","--details-swiper-pagination-bullet-size":"15px"},onSwiper:l},{default:N(()=>[(f(!0),v(A,null,U(o.value.imagesUrl,x=>(f(),ne(m(ae),{key:x},{default:N(()=>[T(m(ee),{src:x,class:"swiper-img",mgWidth:200,mgHeight:200,mgShape:"square",zoomFactor:1,onClick:()=>te(x,o.value.title)},null,8,["src","onClick"])]),_:2},1024))),128)),t("span",Yt,[T(H,{icon:["fas","magnifying-glass"],class:"fs-5"})]),t("div",{ref_key:"prevRef",ref:n,class:"details-swiper-button details-swiper-button-prev"},[T(H,{icon:["fas","chevron-left"]})],512),t("div",{ref_key:"nextRef",ref:g,class:"details-swiper-button details-swiper-button-next"},[T(H,{icon:["fas","chevron-right"]})],512)]),_:1},8,["pagination","thumbs"])])])]),t("div",qt,[t("div",Gt,[t("div",null,[t("h2",Qt,[V($(o.value.title)+" ",1),t("span",{class:"cursor-pointer me-2",onClick:I[2]||(I[2]=K(x=>m(r)(o.value),["prevent"]))},[T(H,{icon:[m(d)(o.value)?"fas":"far","heart"],class:"text-danger fs-3",title:m(d)(o.value)?"移除願望清單":"加入願望清單中"},null,8,["icon","title"])])]),t("div",null,$(o.value.description),1),t("div",Kt,$(o.value.content),1)]),t("div",null,[T(Te,{averageRating:o.value.averageRating||0,totalRatings:o.value.totalRatings||0,classSize:"fs-6",color:"text-primary"},null,8,["averageRating","totalRatings"]),t("span",Zt," ("+$(o.value.totalRatings)+") ",1)]),o.value.isOnSale?(f(),v("div",Jt,[t("span",es,$(m(ce)(o.value.price)),1),t("span",ts,"-"+$(m(Me)(o.value.origin_price,o.value.price)),1)])):(f(),v("div",ss,[t("div",os," NT"+$(m(ce)(o.value.origin_price)),1)])),is,t("div",ns,[t("div",as,[t("div",rs,[T(We,{productId:o.value.id,onFetchQuantity:_e},null,8,["productId"])]),t("div",ls,[t("button",{type:"button",class:Z(["btn btn-primary text-white w-100 py-2",{"cursor-not-allowed":m(C).addTargetId===o.value.id}]),title:"加入購物車",onClick:I[3]||(I[3]=x=>m(k)({id:o.value.id,quantity:B.value})),disabled:m(C).addTargetId===o.value.id},[m(C).addTargetId===o.value.id?(f(),v("span",us,[ds,V(" 新增購物車中")])):(f(),v("span",fs," 加入購物車 "))],10,cs)])])]),t("div",ms,[T(Le,{index:0,list:{title:"產品規格"}},{default:N(()=>[t("div",gs,[t("table",vs,[ps,t("tbody",null,[t("tr",null,[hs,t("td",null,$(o.value.id),1)]),t("tr",null,[bs,t("td",null,[(f(!0),v(A,null,U(o.value.colors,(x,j)=>(f(),v("span",{key:j},[V($(x.title)+" ",1),j<o.value.colors.length-1&&x.title!==""?(f(),v("span",_s,"、")):z("",!0)]))),128))])]),t("tr",null,[ys,t("td",null,$(o.value.dimensions.length)+" x "+$(o.value.dimensions.width)+" x "+$(o.value.dimensions.height)+" 公分 ",1)]),t("tr",null,[ws,t("td",null,$(o.value.material),1)])])])])]),_:1})])])])]),t("div",xs,[$s,t("div",ks,[Ss,(f(!0),v(A,null,U(o.value.imagesUrlDescriptions,(x,j)=>(f(),v("div",{key:j,class:"mb-5"},[j<=2?(f(),v("img",{key:0,src:o.value.imagesUrl[j],alt:x,class:"product-description-img",onClick:Bs=>te(o.value.imagesUrl[j],x)},null,8,Ts)):z("",!0),j<=2?(f(),v("p",Os,$(x),1)):z("",!0)]))),128))]),Is])])):z("",!0)]),Cs,Ms,E.value?(f(),v("div",js,[t("div",Ls,[t("div",Es,[t("div",Ps,[(f(!0),v(A,null,U(E.value,(x,j)=>(f(),v("div",{class:"col col-1-2 col-2-2 col-4-3 px-3",key:j},[T(Pe,{product:x,"img-class":"product-description-card-img","card-bg-color":"#FBF9F9","star-color":"text-primary"},null,8,["product"])]))),128))])])])])):z("",!0)]))]),T(m(Se),{active:m(p).isLoading,"can-cancel":!1,color:"#0089A7"},null,8,["active"]),T(Lt,{ref_key:"imageModal",ref:s},null,512)],64)}}};export{Zs as default};
