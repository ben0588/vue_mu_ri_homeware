import{V as S}from"./index--ZYZKX03.js";import{r as q,Z as B,_ as p,c as a,u as t,b as e,e as s,d,F as v,f as R,t as r,l as k,g as _,a as x,o as n,$ as N}from"./index-vmlNiwhE.js";import{u as m,a as V}from"./useComputedDiscount-IkDIEbmK.js";import{u as C}from"./cartStores-rP9M6NO2.js";import{_ as u}from"./VeeValidateInput-5gEKHbe0.js";import"./useToast-vTYsJrIh.js";const G={key:0,class:"container"},H={key:0},D={class:"table-responsive border-start border-end border-top border-2 border-dark px-3 pt-3"},O={class:"fs-5 border-bottom border-dark pb-2 mb-3"},T={class:"table align-middle"},A=e("thead",null,[e("tr",null,[e("td",{class:"text-start",colspan:"3"},"商品明細"),e("td",null,"售價"),e("td",{class:"text-center"},"數量"),e("td",{class:"text-end pe-3"},"小計")])],-1),P={class:"cart-img-container"},Q=["src","alt"],W=e("td",null,null,-1),Z={class:"text-decoration-line-through text-muted"},j={class:"text-danger"},K={class:"fw-500"},U={class:"text-center"},$={class:"text-end pe-3"},z={class:"border-start border-end border-2 border-dark"},J={class:"d-flex justify-content-end border-bottom border-2 border-dark pb-12 mb-12 pe-3"},M={class:"d-flex flex-column align-items-end"},I={class:"fs-5"},Y={class:"fw-700"},X=e("span",{class:"text-muted"},"*未含運費",-1),ee={key:1,class:"row"},te={class:"col-lg-6"},se={class:"border border-2 border-dark p-3"},oe={class:"fs-5 border-bottom border-dark pb-2 mb-3"},re=["disabled"],ae={key:0},de=e("span",{class:"spinner-grow spinner-grow-sm me-1","aria-hidden":"true"},null,-1),ne=e("span",{role:"status"},null,-1),ce={key:1},le={class:"border border-2 border-dark p-3 mt-3"},ie={class:"fs-5 border-bottom border-dark pb-2 mb-3"},ue={class:"border border-2 border-dark p-3 mt-3"},pe={class:"fs-5 border-bottom border-dark pb-2 mb-3"},_e={class:"col-lg-6"},me={class:"border border-2 border-dark p-3"},be={class:"fs-5 border-bottom border-dark pb-2 mb-3"},he={class:"d-flex justify-content-end pb-12 mb-12"},fe={key:2,class:"flex-center flex-column"},ge=e("p",{class:"fs-4"},"購物車目前並無任何商品",-1),ve=e("div",null,[e("img",{src:"https://storage.googleapis.com/vue-course-api.appspot.com/vue-ben0588/1709523797457.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=TVpfq289hPAS0eJEUfUdQ094vN5dKwHD%2B261x5OpEH1uHeeE0Nd99HygcwvSAOfHcQJ4%2F%2B9BK4ugP20MZHg4sW9yksSFesbZoGYe6mOP3%2FLGJYD%2BwUyH3Go3d544OviGcMSRW%2FzcR1RKaWsMH1JEKdqCXibbCmwjqmnGufKB%2FeMqTzm3u8%2Fa66DIcFfmJf4t4%2BWdh2R5EQWzKN%2FVTud3sRRhiH%2BrltLOEoty5SBftDQnphuRO19cubaX2FaUG5ZpArGLvfPUgNu8lW9ivRIlaWgEqf36Mki4GOVn1cL2QV5lPje1jeZqN5oQjRZk1%2F52YRpaP7LcSt%2ByA%2FZEa0mnpQ%3D%3D",alt:"購物車目前並無任何商品"})],-1),ke={class:"mt-4"},Be={__name:"OrderConfirmView",setup(xe){const c=C(),h=q(null),y=/^(0|\+?886)9\d{8}$/,F=/^[\u4E00-\u9FA5]{2,4}$/,w=B().shape({username:p().required("此欄位必填").matches(F,{message:"請輸入有效的中文姓名",excludeEmptyString:!0}),email:p().required("此欄位必填").email("請輸入正確email格式"),phone:p().matches(y,{message:"請輸入有效的台灣手機號碼",excludeEmptyString:!0}).required("手機號碼為必填欄位"),address:p().required("聯絡地址必填")}),E=()=>{h.value.handleSubmit(f=>{console.log(f)})()};return(f,ye)=>{const l=x("font-awesome-icon"),b=x("router-link");return n(),a(v,null,[t(c).cartLoading?k("",!0):(n(),a("div",G,[t(c).cartList.length?(n(),a("div",H,[e("div",D,[e("p",O,[s(l,{icon:["far","rectangle-list"]}),d(" 確認訂單 ")]),e("table",T,[A,e("tbody",null,[(n(!0),a(v,null,R(t(c).cartList,o=>(n(),a("tr",{key:o.id},[e("td",null,[e("div",P,[e("img",{src:o.product.imageUrl,alt:o.product.title,class:"cart-img"},null,8,Q)])]),e("td",null,[e("div",null,[e("div",null,r(o.product.title),1),e("div",null,r(o.product.content),1),e("div",null,r(o.product.unit),1)])]),W,e("td",null,[e("div",null,[e("span",Z,r(t(m)(o.product.origin_price)),1),e("span",j," -"+r(t(V)(o.product.origin_price,o.product.price)),1)]),e("div",K,r(t(m)(o.product.price)),1)]),e("td",U,r(o.qty),1),e("td",$,r(t(m)(o.total)),1)]))),128))])])]),e("div",z,[e("div",J,[e("div",M,[e("span",I,[e("span",null," 共 "+r(t(c).cartList.length)+" 項商品 | ",1),e("span",Y," 合計 NT"+r(t(m)(t(c).cartFinalTotal)),1)]),X])])])])):k("",!0),t(c).cartList.length?(n(),a("div",ee,[e("div",te,[e("div",se,[s(t(N),{"validation-schema":t(w),as:"div",ref_key:"orederForm",ref:h},{default:_(({handleSubmit:o,isSubmitting:g,errors:i,meta:L})=>[e("p",oe,[s(l,{icon:["far","address-card"]}),d(" 訂購人資料 ")]),s(u,{name:"username",label:"訂購人姓名",id:"order-username",placeholder:"請輸入訂購人姓名",errors:i,type:"text"},null,8,["errors"]),s(u,{name:"phone",label:"聯絡手機",id:"order-phone",placeholder:"請輸入聯絡手機",errors:i,type:"tel"},null,8,["errors"]),s(u,{name:"email",label:"聯絡信箱 [ 訂單通知、電子發票寄送 ]",id:"order-email",placeholder:"請輸入聯絡電子信箱",errors:i,type:"email"},null,8,["errors"]),s(u,{name:"address",label:"地址",id:"order-address",placeholder:"請輸入聯絡電子信箱",errors:i,type:"text"},null,8,["errors"]),s(u,{name:"center",label:"問題描述",id:"more-center",placeholder:"請詳細描述問題",errors:i,type:"text",as:"textarea"},null,8,["errors"]),e("button",{type:"submit",class:"btn btn-dark w-100",disabled:!L.valid||g},[g?(n(),a("span",ae,[de,ne,d(" 提交表單中 ")])):(n(),a("span",ce,"提交表單"))],8,re)]),_:1},8,["validation-schema"])]),e("div",le,[e("p",ie,[s(l,{icon:["far","pen-to-square"]}),d(" 訂單備註/告知客服內容 ")])]),e("div",ue,[e("p",pe,[s(l,{icon:["fas","truck-fast"]}),d(" 運送方式 ")])])]),e("div",_e,[e("div",me,[e("p",be,[s(l,{icon:["fas","ticket"]}),d(" 優惠卷 ")]),e("div",he,[s(b,{to:"/products",class:"btn btn-outline-dark",style:{width:"150px"}},{default:_(()=>[d("繼續購物")]),_:1}),s(b,{to:"/carts/confirm",class:"btn btn-primary text-white ms-2",style:{width:"150px"}},{default:_(()=>[d("填寫訂單資訊")]),_:1})]),e("button",{onClick:E},"外部按鈕控制提交表單")])])])):(n(),a("div",fe,[ge,ve,e("div",ke,[s(b,{to:"/products",class:"btn btn-dark px-4"},{default:_(()=>[d("前去逛逛")]),_:1})])]))])),s(t(S),{active:t(c).cartLoading,"can-cancel":!1,color:"#0089A7"},null,8,["active"])],64)}}};export{Be as default};
